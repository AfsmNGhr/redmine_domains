<% route = Rails.application.routes.recognize_path(URI(request.path)) -%>
$('#block').html(
'<%= j render(partial: "#{route[:controller]}/#{route[:action]}") %>'
);
window.history.pushState('', "<%= html_title %>", "<%= URI(request.path) %>");
<% unless URI(request.referer).path =~ %r"#{URI(request.path)}" -%>
  <% if display_main_menu?(@project) -%>
    $('#main-menu').html('<%= j render(text: render_main_menu(@project)) %>');
  <% end %>
  $('#nav-top-menu').html(
  '<%= j render(text: (render_menu_with_material_and_icons :top_menu if User.current.logged? || !Setting.login_required?)) %>'
  );
<% end %>
componentHandler.upgradeAllRegistered();
